[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
priority=10
stdout_logfile=/app/logs/nginx.stdout.log
stderr_logfile=/app/logs/nginx.stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB

[program:gunicorn]
command=gunicorn 
    --bind 0.0.0.0:5001 
    --worker-class eventlet 
    --workers 1 
    --worker-connections 1000 
    --timeout 300 
    --keepalive 75 
    --log-level info 
    --access-logfile /app/logs/gunicorn.access.log 
    --error-logfile /app/logs/gunicorn.error.log 
    --capture-output 
    app:app
directory=/app
autostart=true
autorestart=true
priority=20
stdout_logfile=/app/logs/gunicorn.stdout.log
stderr_logfile=/app/logs/gunicorn.stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
environment=
    PYTHONUNBUFFERED="1",
    FLASK_ENV="production"

[group:youtube-summarizer]
programs=nginx,gunicorn
priority=999